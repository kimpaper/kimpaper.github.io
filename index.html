<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.96.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>기록 저장소</title><meta name=description content="kimpaper.github.io blog"><meta name=author content="kimpaper"><link rel=canonical href=https://kimpaper.github.io/kimpaper.github.io/><link crossorigin=anonymous href=/kimpaper.github.io/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><link rel=icon href=https://kimpaper.github.io/kimpaper.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://kimpaper.github.io/kimpaper.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://kimpaper.github.io/kimpaper.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://kimpaper.github.io/kimpaper.github.io/apple-touch-icon.png><link rel=mask-icon href=https://kimpaper.github.io/kimpaper.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://kimpaper.github.io/kimpaper.github.io/index.xml><link rel=alternate type=application/json href=https://kimpaper.github.io/kimpaper.github.io/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-68818649-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="기록 저장소"><meta property="og:description" content="kimpaper.github.io blog"><meta property="og:type" content="website"><meta property="og:url" content="https://kimpaper.github.io/kimpaper.github.io/"><meta property="og:image" content="https://kimpaper.github.io/kimpaper.github.io/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kimpaper.github.io/kimpaper.github.io/papermod-cover.png"><meta name=twitter:title content="기록 저장소"><meta name=twitter:description content="kimpaper.github.io blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"기록 저장소","url":"https://kimpaper.github.io/kimpaper.github.io","description":"kimpaper.github.io blog","thumbnailUrl":"https://kimpaper.github.io/kimpaper.github.io/favicon.ico","sameAs":["https://github.com/kimpaper","index.xml"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kimpaper.github.io/kimpaper.github.io accesskey=h title="기록 저장소 (Alt + H)">기록 저장소</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://kimpaper.github.io/kimpaper.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://kimpaper.github.io/kimpaper.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://kimpaper.github.io/kimpaper.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://kimpaper.github.io/kimpaper.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>기록 저장소</h1></header><section class=entry-content><p>개인 블로그입니다. 내용에 잘못된 부분은 정정 요청하시면 반영하겠습니다.</p></section><footer class=entry-footer><div class=social-icons><a href=https://github.com/kimpaper target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=RsS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2>golang profiler 사용</h2></header><section class=entry-content><p>http prof 를 이용해 프로파일 한다 1 2 3 4 5 6 7 8 9 10 11 12 13 14 import ( "net/http" _ "net/http/pprof" ) func main() { go func() { log.Println(http.ListenAndServe("0.0.0.0:6060", nil)) }() ... do somthing ... } cpu profile (30초동안 데이터를 모은다) 1 go tool pprof http://xxxx:6060/debug/pprof/profile heap memory (현재 메모리 정보를 반환한다) 1 go tool pprof http://xxxx:6060/debug/pprof/heap heap 을 실행하면 아래와 같이 command line (pprof)가 나오는데 프로파일 명령을 넣으면 된다....</p></section><footer class=entry-footer><span title="2022-03-28 16:53:00.002 +0000 UTC">March 28, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to golang profiler 사용" href=https://kimpaper.github.io/kimpaper.github.io/posts/golang/2022-03-28-golang_profiler/></a></article><article class=post-entry><header class=entry-header><h2>kubernetes cert-manager</h2></header><section class=entry-content><p>kubernetes 에서 ingress 상에서 https를 서비스하는데 지원을 해주는 좋은.. 모듈
cert manager 설치 (1) 참고 https://cert-manager.io/docs/installation/kubernetes/
1 2 kubectl create namespace cert-manager kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v0.13.1/cert-manager.yaml cert manager 설치 (with helm) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 $ kubectl apply --validate=false -f https://raw.githubusercontent.com/jetstack/cert-manager/v0.13.1/deploy/manifests/00-crds.yaml $ kubectl create namespace cert-manager $ helm repo add jetstack https://charts.jetstack.io $ helm repo update # Helm v3+ $ helm install \ cert-manager jetstack/cert-manager \ --namespace cert-manager \ --version v0....</p></section><footer class=entry-footer><span title="2020-05-13 11:18:00.001 +0000 UTC">May 13, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to kubernetes cert-manager" href=https://kimpaper.github.io/kimpaper.github.io/2020/05/13/kubernetes-certmanager/></a></article><article class=post-entry><header class=entry-header><h2>kubernetes glusterfs 연동</h2></header><section class=entry-content><p>glusterfs-kubernetes 설치 시도 중 gluster-kubernetes/deploy/gk-deploy 파일을 열어서 아래 라인을 고쳐야 한다 (kubectl에 없어진 인자값을 쓴다)
1 2 3 # deprecated "--show-all" parameter #heketi_pod=$(${CLI} get pod --no-headers --show-all --selector="heketi" | awk '{print $1}') heketi_pod=$(${CLI} get pod --no-headers --selector="heketi" | awk '{print $1}') 1 2 3 4 5 6 7 8 9 # daemonset을 설치하기 위해 # 노드별로 아래 경로를 비워야함 rm -rf /var/lib/misc/glusterfsd /var/lib/glusterd /var/log/glusterfs /etc/glusterfs /var/lib/heketi #uninstall ....</p></section><footer class=entry-footer><span title="2020-05-13 11:18:00.001 +0000 UTC">May 13, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to kubernetes glusterfs 연동" href=https://kimpaper.github.io/kimpaper.github.io/posts/kube/2020-05-13-kubernetes-glusterfs/></a></article><article class=post-entry><header class=entry-header><h2>kubernetes ingress - 특정 url로 proxy 걸기</h2></header><section class=entry-content><p>외부로 ingress를 노출하고 처리하는 서버가 kubernetes 내에 service가 아니라 다른 별도의 서버일 경우에 아래와 같이 proxy_pass를 지정한다. (사실 응용하면 nginx 기능들이 지원하는건 다 될것 같다.) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 kind: Ingress apiVersion: extensions/v1beta1 metadata: name: gitlab.test.com namespace: nginx-ingress annotations: kubernetes.io/ingress.class: nginx nginx.ingress.kubernetes.io/proxy-connect-timeout: '3600' nginx....</p></section><footer class=entry-footer><span title="2020-05-13 11:18:00.001 +0000 UTC">May 13, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to kubernetes ingress - 특정 url로 proxy 걸기" href=https://kimpaper.github.io/kimpaper.github.io/2020/05/13/kubernetes-ingress-urlproxy/></a></article><article class=post-entry><header class=entry-header><h2>ssh key를 이용한 로그인</h2></header><section class=entry-content><p>macOS 에서 ssh key를 지정하여 서버로 비밀번호 타이핑 없이 바로 로그인 하게 하자
평소엔 보안때문에 안해놓는다.
macOS - 키 생성 1 ssh-keygen -t rsa -C "name" - public key를 조회 1 cat ~/.ssh/id_rsa.pub 대상 Server (CentOS) - public key를 ~/.ssh/authorized_keys 파일에 추가 1 vi ~/.ssh/authorized_keys</p></section><footer class=entry-footer><span title="2016-08-11 16:07:00.001 +0000 UTC">August 11, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to ssh key를 이용한 로그인" href=https://kimpaper.github.io/kimpaper.github.io/posts/centos/2016-08-11-ssh-key-login/></a></article><article class=post-entry><header class=entry-header><h2>redis data type 종류</h2></header><section class=entry-content><p>Redis Data Type 요약 인터넷상에 수많은 좋은 자료가 있음에도 공부 차원에서 정리를 한다
테스트는 redis-cli를 이용해서 하지만 실제 사용은 언어에 맞는 api library를 사용 할듯
개요 http://redis.io/topics/data-types-intro
예제 http://redis.io/topics/data-types
Strings value에 문자 숫자 등을 저장한다 저장시 별도로 형이 없다 (숫자 문자 구분이 없음) 숫자도 저장가능 하다 그리고 숫자에 incr, incrby, decr, decrby 같은 atomic counter 연산이 가능 incrby, decrby 는 특정 수를 더하거나 뺄때 사용 incrby "test_strings" 10 처럼 사용 1 2 3 4 5 6 7 8 9 10 # redis-cli 127....</p></section><footer class=entry-footer><span title="2016-07-27 14:32:00.002 +0000 UTC">July 27, 2016</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to redis data type 종류" href=https://kimpaper.github.io/kimpaper.github.io/2016/07/27/redis-datatype/></a></article><article class=post-entry><header class=entry-header><h2>maven에서 gradle로 변환...</h2></header><section class=entry-content><p>gradle설치 (for macOS) 1 brew install gradle 원래 수동으로 설치하는 방법이 있으나.. 나는 위와 같이 자동 설치를 좋아한다 대부분 그렇지 않을까~
수동 설치는 사이트에서 참고하자 https://gradle.org/gradle-download/
pom.xml -> build.gradle로 변환 1 2 # 프로젝트 폴더 (pom.xml이 있는곳) 으로 이동 gradle init --type pom 위와 같이 하면 project name 및 dependencies 등이 gralde용 build script로 변환이 되고 프로젝트가 gradle를 사용가능하도록 설정된다
intelliJ IDEA에서 기존 maven으로 구성된 프로젝트라면 module을 새로 import해야 한다 (그래야 툴에서 인식이 되는듯 하다)...</p></section><footer class=entry-footer><span title="2016-07-14 14:15:00.001 +0000 UTC">July 14, 2016</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to maven에서 gradle로 변환..." href=https://kimpaper.github.io/kimpaper.github.io/2016/07/14/gradle/></a></article><article class=post-entry><header class=entry-header><h2>fluentd로 로그를 모으기</h2></header><section class=entry-content><p>예전에 flume로 에러 로그들을 모으고 있었는데 fluentd로 갈아타려고 한다. 사실 모으는 목적이 아니라 모니터링이 목적
설치 아래 사이트에 나오는 command만 실행해주면 chkconfig 등록까지 다 해준다. 참고 공식 사이트
http://docs.fluentd.org/articles/install-by-rpm#step-0-before-installation
구성은 flume와 비슷한것 같다
client -> server 구성으로 해놓고 client에서 수집된 로그를 server로 전달.
아래 커맨드 실행 1 curl -L https://toolbelt.treasuredata.com/sh/install-redhat-td-agent2.sh | sh 서비스 구동 1 service td-agent start 당연히 service td-agent stop 가 중지다...</p></section><footer class=entry-footer><span title="2016-06-22 15:47:00.001 +0000 UTC">June 22, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to fluentd로 로그를 모으기" href=https://kimpaper.github.io/kimpaper.github.io/posts/opensource/2016-06-21-fluentd/></a></article><article class=post-entry><header class=entry-header><h2>restful api 서버에서 평균 응답시간, 호출횟수, Min, Max 구하기</h2></header><section class=entry-content><p>app에서 데이타 통신을하는 api서버가 있다
각 인터페이스별 평균 응답시간을 아파치 로그를 활용하여 구해봤다
서버는 apache+tomcat, spring으로 구현한 서버이다
hadoop과 spark, python 설정은
Python and Spark로 로그 파일 분석 (with hadoop) 을 참고 하자
1. 아파치 TransferLog 로그파일에 응답 시간 남기기 우선 분석하기 전에 아파치 로그에 응답 시간을 추가로 기록하도록 하자
/etc/httpd/conf.d/ssl.conf 경로에서 아래를 편집했다.
물론. 설정 파일이 있는 경로와 이름은 서버마다 틀릴 수 있다
1 2 3 4 5 6 &lt;VirtualHost _default_:443> ....</p></section><footer class=entry-footer><span title="2016-06-08 15:32:00.001 +0000 UTC">June 8, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to restful api 서버에서 평균 응답시간, 호출횟수, Min, Max 구하기" href=https://kimpaper.github.io/kimpaper.github.io/2016/06/08/apachelog/></a></article><article class=post-entry><header class=entry-header><h2>Python and Spark로 로그 파일 분석 (with hadoop)</h2></header><section class=entry-content><p>Spark를 이용한 파일 분석 spark도 잘 모르고 hadoop도 잘 모르는 상태에서 진행해서 틀린 부분이 있을 것이다.
참고로 OSX에서 진행된 작업이다.
설정 1. Hadoop를 설치 하고 실행한다 2. hdfs상에 파일을 올린다. 1 2 cd /logs hdfs dfs -put test.log /input/ 아래와 같이 파일 브라우징이 가능하다 아래에서 올라간 파일을 확인! http://localhost:50070/explorer.html#/input
3. spark의 python 커맨드 테스트.. $SPARK_HOME/bin/pyspark 하둡을 켜고 pyspark를 실행하면 아래와 같이 나온다
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 Python 2....</p></section><footer class=entry-footer><span title="2016-05-30 16:35:00.001 +0000 UTC">May 30, 2016</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;페이퍼</footer><a class=entry-link aria-label="post link to Python and Spark로 로그 파일 분석 (with hadoop)" href=https://kimpaper.github.io/kimpaper.github.io/posts/opensource/2016-05-30-spark-hadoop/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://kimpaper.github.io/kimpaper.github.io/page/2/>Next Page »</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://kimpaper.github.io/kimpaper.github.io>기록 저장소</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>